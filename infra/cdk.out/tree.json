{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.239.0"},"children":{"AllianceRiskStack":{"id":"AllianceRiskStack","path":"AllianceRiskStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.239.0"},"children":{"UserPool":{"id":"UserPool","path":"AllianceRiskStack/UserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"AllianceRiskStack/UserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":true},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","policies":{"passwordPolicy":{"minimumLength":8,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":false}},"smsVerificationMessage":"The verification code to your new account is {####}","usernameAttributes":["email"],"userPoolName":"alliance-risk-user-pool","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}}}},"UserPoolClient":{"id":"UserPoolClient","path":"AllianceRiskStack/UserPoolClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"AllianceRiskStack/UserPoolClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"accessTokenValidity":60,"allowedOAuthFlows":["implicit","code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["profile","phone","email","openid","aws.cognito.signin.user.admin"],"callbackUrLs":["https://example.com"],"clientName":"alliance-risk-api-client","explicitAuthFlows":["ALLOW_USER_PASSWORD_AUTH","ALLOW_ADMIN_USER_PASSWORD_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":false,"idTokenValidity":60,"refreshTokenValidity":43200,"supportedIdentityProviders":["COGNITO"],"tokenValidityUnits":{"idToken":"minutes","accessToken":"minutes","refreshToken":"minutes"},"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}}}},"AdminGroup":{"id":"AdminGroup","path":"AllianceRiskStack/AdminGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"Platform administrators","groupName":"admin","userPoolId":{"Ref":"UserPool6BA7E5F2"}}}},"DefaultVpc":{"id":"DefaultVpc","path":"AllianceRiskStack/DefaultVpc","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.239.0"},"children":{"PublicSubnet1":{"id":"PublicSubnet1","path":"AllianceRiskStack/DefaultVpc/PublicSubnet1","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.239.0"}},"PublicSubnet2":{"id":"PublicSubnet2","path":"AllianceRiskStack/DefaultVpc/PublicSubnet2","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.239.0"}},"PublicSubnet3":{"id":"PublicSubnet3","path":"AllianceRiskStack/DefaultVpc/PublicSubnet3","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.239.0"}},"PublicSubnet4":{"id":"PublicSubnet4","path":"AllianceRiskStack/DefaultVpc/PublicSubnet4","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.239.0"}},"PublicSubnet5":{"id":"PublicSubnet5","path":"AllianceRiskStack/DefaultVpc/PublicSubnet5","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.239.0"}},"PublicSubnet6":{"id":"PublicSubnet6","path":"AllianceRiskStack/DefaultVpc/PublicSubnet6","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.239.0"}}}},"DbSecurityGroup":{"id":"DbSecurityGroup","path":"AllianceRiskStack/DbSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"AllianceRiskStack/DbSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for Alliance Risk RDS instance","securityGroupEgress":[{"cidrIp":"255.255.255.255/32","description":"Disallow all traffic","ipProtocol":"icmp","fromPort":252,"toPort":86}],"securityGroupIngress":[{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":5432,"toPort":5432,"description":"Allow PostgreSQL from anywhere (MVP)"}],"vpcId":"vpc-0295c23eeee02b9cc"}}}}},"DefaultVpcForDb":{"id":"DefaultVpcForDb","path":"AllianceRiskStack/DefaultVpcForDb","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.239.0"},"children":{"PublicSubnet1":{"id":"PublicSubnet1","path":"AllianceRiskStack/DefaultVpcForDb/PublicSubnet1","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.239.0"}},"PublicSubnet2":{"id":"PublicSubnet2","path":"AllianceRiskStack/DefaultVpcForDb/PublicSubnet2","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.239.0"}},"PublicSubnet3":{"id":"PublicSubnet3","path":"AllianceRiskStack/DefaultVpcForDb/PublicSubnet3","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.239.0"}},"PublicSubnet4":{"id":"PublicSubnet4","path":"AllianceRiskStack/DefaultVpcForDb/PublicSubnet4","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.239.0"}},"PublicSubnet5":{"id":"PublicSubnet5","path":"AllianceRiskStack/DefaultVpcForDb/PublicSubnet5","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.239.0"}},"PublicSubnet6":{"id":"PublicSubnet6","path":"AllianceRiskStack/DefaultVpcForDb/PublicSubnet6","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.239.0"}}}},"Database":{"id":"Database","path":"AllianceRiskStack/Database","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseInstance","version":"2.239.0"},"children":{"SubnetGroup":{"id":"SubnetGroup","path":"AllianceRiskStack/Database/SubnetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.SubnetGroup","version":"2.239.0"},"children":{"Default":{"id":"Default","path":"AllianceRiskStack/Database/SubnetGroup/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBSubnetGroup","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBSubnetGroup","aws:cdk:cloudformation:props":{"dbSubnetGroupDescription":"Subnet group for Database database","subnetIds":["subnet-0f2b677ab84bc4059","subnet-0dec6271ca38d2f4f","subnet-0e616b471639f15ec","subnet-0464ac157a67a4d5d","subnet-040f6c89005332f8c","subnet-0d51486f53e46024e"]}}}}},"Secret":{"id":"Secret","path":"AllianceRiskStack/Database/Secret","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseSecret","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"AllianceRiskStack/Database/Secret/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"description":{"Fn::Join":["",["Generated by the CDK for stack: ",{"Ref":"AWS::StackName"}]]},"generateSecretString":{"passwordLength":30,"secretStringTemplate":"{\"username\":\"postgres\"}","generateStringKey":"password","excludeCharacters":" %+~`#$&*()|[]{}:;<>?!'/@\"\\"},"name":"alliance-risk/db-credentials"}}},"Attachment":{"id":"Attachment","path":"AllianceRiskStack/Database/Secret/Attachment","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.SecretTargetAttachment","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"AllianceRiskStack/Database/Secret/Attachment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecretTargetAttachment","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::SecretTargetAttachment","aws:cdk:cloudformation:props":{"secretId":{"Ref":"AllianceRiskStackDatabaseSecretA4FE471B3fdaad7efa858a3daf9490cf0a702aeb"},"targetId":{"Ref":"DatabaseB269D8BB"},"targetType":"AWS::RDS::DBInstance"}}}}}}},"Resource":{"id":"Resource","path":"AllianceRiskStack/Database/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBInstance","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBInstance","aws:cdk:cloudformation:props":{"allocatedStorage":"20","backupRetentionPeriod":7,"copyTagsToSnapshot":true,"dbInstanceClass":"db.t3.micro","dbName":"alliance_risk","dbSubnetGroupName":{"Ref":"DatabaseSubnetGroup7D60F180"},"deletionProtection":false,"engine":"postgres","engineVersion":"15","masterUsername":"postgres","masterUserPassword":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"AllianceRiskStackDatabaseSecretA4FE471B3fdaad7efa858a3daf9490cf0a702aeb"},":SecretString:password::}}"]]},"publiclyAccessible":true,"storageType":"gp3","vpcSecurityGroups":[{"Fn::GetAtt":["DbSecurityGroupE9D701AD","GroupId"]}]}}}}},"FileBucket":{"id":"FileBucket","path":"AllianceRiskStack/FileBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"AllianceRiskStack/FileBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"alliance-risk-files-569113802249","publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true}}}}}},"LambdaExecutionRole":{"id":"LambdaExecutionRole","path":"AllianceRiskStack/LambdaExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"AllianceRiskStack/LambdaExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AllianceRiskStack/LambdaExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"AllianceRiskStack/LambdaExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminAddUserToGroup","cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminDisableUser","cognito-idp:AdminEnableUser","cognito-idp:AdminGetUser","cognito-idp:AdminInitiateAuth","cognito-idp:AdminListGroupsForUser","cognito-idp:AdminRemoveUserFromGroup","cognito-idp:AdminRespondToAuthChallenge","cognito-idp:AdminSetUserPassword","cognito-idp:AdminUpdateUserAttributes","cognito-idp:ConfirmForgotPassword","cognito-idp:ForgotPassword","cognito-idp:ListGroups","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["bedrock:InvokeModel","bedrock:InvokeModelWithResponseStream","bedrock:Retrieve","textract:GetDocumentAnalysis","textract:StartDocumentAnalysis"],"Effect":"Allow","Resource":"*"},{"Action":["s3:DeleteObject","s3:GetObject","s3:PutObject"],"Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::GetAtt":["FileBucketCDFCD6DE","Arn"]},"/*"]]}}],"Version":"2012-10-17"},"policyName":"LambdaExecutionRoleDefaultPolicy6D69732F","roles":[{"Ref":"LambdaExecutionRoleD5C26073"}]}}}}}}},"WorkerLambda":{"id":"WorkerLambda","path":"AllianceRiskStack/WorkerLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.239.0"},"children":{"Code":{"id":"Code","path":"AllianceRiskStack/WorkerLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.239.0"},"children":{"Stage":{"id":"Stage","path":"AllianceRiskStack/WorkerLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.239.0"}},"AssetBucket":{"id":"AssetBucket","path":"AllianceRiskStack/WorkerLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.239.0"}}}},"Resource":{"id":"Resource","path":"AllianceRiskStack/WorkerLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"architectures":["arm64"],"code":{"s3Bucket":"cdk-hnb659fds-assets-569113802249-us-east-1","s3Key":"821bc6b2e6a671ab1332ba9170b5d12a2b5bcd15d8a2d4a117db632d66efbefa.zip"},"environment":{"variables":{"ENVIRONMENT":"production","AWS_ACCOUNT_ID":"569113802249"}},"functionName":"alliance-risk-worker","handler":"dist/worker.handler","memorySize":1024,"role":{"Fn::GetAtt":["LambdaExecutionRoleD5C26073","Arn"]},"runtime":"nodejs20.x","timeout":900}}}}},"ApiLambdaExecutionRole":{"id":"ApiLambdaExecutionRole","path":"AllianceRiskStack/ApiLambdaExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"AllianceRiskStack/ApiLambdaExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AllianceRiskStack/ApiLambdaExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"AllianceRiskStack/ApiLambdaExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-idp:AdminAddUserToGroup","cognito-idp:AdminCreateUser","cognito-idp:AdminDeleteUser","cognito-idp:AdminDisableUser","cognito-idp:AdminEnableUser","cognito-idp:AdminGetUser","cognito-idp:AdminInitiateAuth","cognito-idp:AdminListGroupsForUser","cognito-idp:AdminRemoveUserFromGroup","cognito-idp:AdminRespondToAuthChallenge","cognito-idp:AdminSetUserPassword","cognito-idp:AdminUpdateUserAttributes","cognito-idp:ConfirmForgotPassword","cognito-idp:ForgotPassword","cognito-idp:ListGroups","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}},{"Action":["bedrock:InvokeModel","bedrock:InvokeModelWithResponseStream","bedrock:Retrieve","textract:GetDocumentAnalysis","textract:StartDocumentAnalysis"],"Effect":"Allow","Resource":"*"},{"Action":["s3:DeleteObject","s3:GetObject","s3:PutObject"],"Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::GetAtt":["FileBucketCDFCD6DE","Arn"]},"/*"]]}},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":{"Fn::GetAtt":["WorkerLambdaBD11C0E2","Arn"]}}],"Version":"2012-10-17"},"policyName":"ApiLambdaExecutionRoleDefaultPolicyDDD21A12","roles":[{"Ref":"ApiLambdaExecutionRoleADBB784E"}]}}}}}}},"ApiLambda":{"id":"ApiLambda","path":"AllianceRiskStack/ApiLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.239.0"},"children":{"Code":{"id":"Code","path":"AllianceRiskStack/ApiLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.239.0"},"children":{"Stage":{"id":"Stage","path":"AllianceRiskStack/ApiLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.239.0"}},"AssetBucket":{"id":"AssetBucket","path":"AllianceRiskStack/ApiLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.239.0"}}}},"Resource":{"id":"Resource","path":"AllianceRiskStack/ApiLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"architectures":["arm64"],"code":{"s3Bucket":"cdk-hnb659fds-assets-569113802249-us-east-1","s3Key":"821bc6b2e6a671ab1332ba9170b5d12a2b5bcd15d8a2d4a117db632d66efbefa.zip"},"environment":{"variables":{"ENVIRONMENT":"production","COGNITO_USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"COGNITO_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"},"S3_BUCKET_NAME":{"Ref":"FileBucketCDFCD6DE"},"AWS_ACCOUNT_ID":"569113802249","WORKER_FUNCTION_NAME":{"Ref":"WorkerLambdaBD11C0E2"},"CORS_ORIGIN":"https://app.alliance-risk.example.com"}},"functionName":"alliance-risk-api","handler":"dist/lambda.handler","memorySize":1024,"role":{"Fn::GetAtt":["ApiLambdaExecutionRoleADBB784E","Arn"]},"runtime":"nodejs20.x","timeout":29}}}}},"HttpApi":{"id":"HttpApi","path":"AllianceRiskStack/HttpApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpApi","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"AllianceRiskStack/HttpApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnApi","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Api","aws:cdk:cloudformation:props":{"corsConfiguration":{"allowHeaders":["Content-Type","Authorization"],"allowMethods":["GET","POST","PUT","DELETE","OPTIONS","PATCH"],"allowOrigins":["*"],"maxAge":86400},"name":"alliance-risk-api","protocolType":"HTTP"}}},"DefaultRoute":{"id":"DefaultRoute","path":"AllianceRiskStack/HttpApi/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.239.0"},"children":{"ApiIntegration":{"id":"ApiIntegration","path":"AllianceRiskStack/HttpApi/DefaultRoute/ApiIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"AllianceRiskStack/HttpApi/DefaultRoute/ApiIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["ApiLambda91D2282D","Arn"]},"payloadFormatVersion":"2.0"}}}}},"ApiIntegration-Permission":{"id":"ApiIntegration-Permission","path":"AllianceRiskStack/HttpApi/DefaultRoute/ApiIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ApiLambda91D2282D","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:569113802249:",{"Ref":"HttpApiF5A9A8A7"},"/*/*"]]}}}},"Resource":{"id":"Resource","path":"AllianceRiskStack/HttpApi/DefaultRoute/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"authorizationType":"NONE","routeKey":"$default","target":{"Fn::Join":["",["integrations/",{"Ref":"HttpApiDefaultRouteApiIntegration33D1984A"}]]}}}}}},"DefaultStage":{"id":"DefaultStage","path":"AllianceRiskStack/HttpApi/DefaultStage","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpStage","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"AllianceRiskStack/HttpApi/DefaultStage/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnStage","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Stage","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"autoDeploy":true,"stageName":"$default"}}}}}}},"WebBucket":{"id":"WebBucket","path":"AllianceRiskStack/WebBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"AllianceRiskStack/WebBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"alliance-risk-web-569113802249","publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}]}}},"Policy":{"id":"Policy","path":"AllianceRiskStack/WebBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"AllianceRiskStack/WebBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"WebBucket12880F5B"},"policyDocument":{"Statement":[{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["WebBucket12880F5B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["WebBucket12880F5B","Arn"]},"/*"]]}]},{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["WebOAI6A7C4516","S3CanonicalUserId"]}},"Resource":[{"Fn::GetAtt":["WebBucket12880F5B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["WebBucket12880F5B","Arn"]},"/*"]]}]},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["WebOAI6A7C4516","S3CanonicalUserId"]}},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["WebBucket12880F5B","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"AllianceRiskStack/WebBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.239.0"},"children":{"Default":{"id":"Default","path":"AllianceRiskStack/WebBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.239.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"AllianceRiskStack/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.239.0"},"children":{"Staging":{"id":"Staging","path":"AllianceRiskStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.239.0"}},"Role":{"id":"Role","path":"AllianceRiskStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.239.0"}},"Handler":{"id":"Handler","path":"AllianceRiskStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.239.0"}}}},"WebOAI":{"id":"WebOAI","path":"AllianceRiskStack/WebOAI","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.OriginAccessIdentity","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"AllianceRiskStack/WebOAI/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCloudFrontOriginAccessIdentity","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CloudFrontOriginAccessIdentity","aws:cdk:cloudformation:props":{"cloudFrontOriginAccessIdentityConfig":{"comment":"Alliance Risk web bucket OAI"}}}}}},"WebDistribution":{"id":"WebDistribution","path":"AllianceRiskStack/WebDistribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.239.0"},"children":{"Origin1":{"id":"Origin1","path":"AllianceRiskStack/WebDistribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.5.1"}},"Resource":{"id":"Resource","path":"AllianceRiskStack/WebDistribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["WebBucket12880F5B","RegionalDomainName"]},"id":"AllianceRiskStackWebDistributionOrigin18984B369","s3OriginConfig":{"originAccessIdentity":{"Fn::Join":["",["origin-access-identity/cloudfront/",{"Ref":"WebOAI6A7C4516"}]]}}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"AllianceRiskStackWebDistributionOrigin18984B369","cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"},"customErrorResponses":[{"errorCachingMinTtl":0,"errorCode":403,"responseCode":200,"responsePagePath":"/index.html"},{"errorCachingMinTtl":0,"errorCode":404,"responseCode":200,"responsePagePath":"/index.html"}],"defaultRootObject":"index.html","httpVersion":"http2","ipv6Enabled":true,"priceClass":"PriceClass_100"}}}}}},"ApiUrl":{"id":"ApiUrl","path":"AllianceRiskStack/ApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.239.0"}},"CloudFrontUrl":{"id":"CloudFrontUrl","path":"AllianceRiskStack/CloudFrontUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.239.0"}},"CognitoUserPoolId":{"id":"CognitoUserPoolId","path":"AllianceRiskStack/CognitoUserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.239.0"}},"CognitoClientId":{"id":"CognitoClientId","path":"AllianceRiskStack/CognitoClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.239.0"}},"FileBucketName":{"id":"FileBucketName","path":"AllianceRiskStack/FileBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.239.0"}},"WebBucketName":{"id":"WebBucketName","path":"AllianceRiskStack/WebBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.239.0"}},"DatabaseEndpoint":{"id":"DatabaseEndpoint","path":"AllianceRiskStack/DatabaseEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.239.0"}},"WorkerLambdaName":{"id":"WorkerLambdaName","path":"AllianceRiskStack/WorkerLambdaName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.239.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"AllianceRiskStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.5.1"},"children":{"Default":{"id":"Default","path":"AllianceRiskStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.239.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"AllianceRiskStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.239.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"AllianceRiskStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.239.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.5.1"}}}}}